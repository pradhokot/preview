<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Section Brush Reveal Animation</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            background-color: #ffffff;
        }

        .spacer {
            height: 50vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #333;
            color: #fff;
            font-family: sans-serif;
            font-size: 2rem;
            text-align: center;
        }

        .brush-section {
            position: relative;
            width: 100%;
            height: 100vh; /* Will be pinned */
            overflow: hidden;
            background-color: #fff; /* Ensure white background if needed */
        }

        .brush-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; 
        }

        image {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>

    <div class="spacer">
        <p>Scroll Down to Start Painting<br><small>Section 1</small></p>
    </div>

    <!-- Section 1 -->
    <div class="brush-section" id="section1">
        <svg class="brush-svg" viewBox="0 0 1920 1080" preserveAspectRatio="xMidYMid slice" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <defs>
                <mask id="brushMask1">
                    <path class="drawPath" fill="none" stroke="white" stroke-width="150" stroke-linecap="round" stroke-linejoin="round"
                        d="M149.3,385.3c80.9-72.6,141.6-121.7,150.3-113.5c16.7,15.7-169,235.8-155.9,247.5
                        c25.7,22.9,414.8-344.3,430.4-328.3c13.7,14-277.5,307.8-258.5,328.3c22.8,24.6,469.3-364.7,492.5-339.7
                        c20,21.6-297.9,331.5-274.4,357.8c28.3,31.6,519.3-382.7,549.4-349.5C1109,216.3,777.9,552.3,791,565.4
                        c14.3,14.2,413.1-378.2,434.8-357.9c24.2,22.7-445.4,536.6-416.6,564.8c32.4,31.7,668.6-576.2,685-559.2
                        c16.6,17.1-617.2,645.4-595.6,668.3c21.3,22.5,662.5-556.6,680.9-536.9c16.6,17.9-497.3,507.6-471.1,536.9
                        c24.3,27.2,492.6-366.2,517.3-338.3c21.4,24.3-310.2,347.9-299.2,359.3c11.1,11.4,355.7-310,370.5-295
                        c11.6,11.8-193.5,218-174.8,239.1c12.1,13.5,113-54.4,255.8-162.2" />
                </mask>
            </defs>
            <!-- Blank canvas (no base image) -> Reveal sketch -->
            <image xlink:href="../assets/img/hasil.png" width="1920" height="1080" preserveAspectRatio="xMidYMid slice" mask="url(#brushMask1)" />
        </svg>
    </div>

    <!-- <div class="spacer">
        <p>Keep Scrolling...<br><small>Section 2</small></p>
    </div> -->

    <!-- Section 2 -->
    <div class="brush-section" id="section2">
        <svg class="brush-svg" viewBox="0 0 1920 1080" preserveAspectRatio="xMidYMid slice" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <defs>
                <mask id="brushMask2">
                    <path class="drawPath" fill="none" stroke="white" stroke-width="150" stroke-linecap="round" stroke-linejoin="round"
                        d="M149.3,385.3c80.9-72.6,141.6-121.7,150.3-113.5c16.7,15.7-169,235.8-155.9,247.5
                        c25.7,22.9,414.8-344.3,430.4-328.3c13.7,14-277.5,307.8-258.5,328.3c22.8,24.6,469.3-364.7,492.5-339.7
                        c20,21.6-297.9,331.5-274.4,357.8c28.3,31.6,519.3-382.7,549.4-349.5C1109,216.3,777.9,552.3,791,565.4
                        c14.3,14.2,413.1-378.2,434.8-357.9c24.2,22.7-445.4,536.6-416.6,564.8c32.4,31.7,668.6-576.2,685-559.2
                        c16.6,17.1-617.2,645.4-595.6,668.3c21.3,22.5,662.5-556.6,680.9-536.9c16.6,17.9-497.3,507.6-471.1,536.9
                        c24.3,27.2,492.6-366.2,517.3-338.3c21.4,24.3-310.2,347.9-299.2,359.3c11.1,11.4,355.7-310,370.5-295
                        c11.6,11.8-193.5,218-174.8,239.1c12.1,13.5,113-54.4,255.8-162.2" />
                </mask>
            </defs>
            <!-- Same image for demo, could be different -->
            <image xlink:href="../assets/img/hasil.png" width="1920" height="1080" preserveAspectRatio="xMidYMid slice" mask="url(#brushMask2)" />
        </svg>
    </div>

    <div class="spacer">
        <p>End of Journey</p>
    </div>

    <script src="js/gsap.min.js"></script>
    <script src="js/ScrollTrigger.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {
                gsap.registerPlugin(ScrollTrigger);

                // Select all sections
                const sections = gsap.utils.toArray(".brush-section");

                sections.forEach((section, index) => {
                    // Find the path inside the current section
                    const path = section.querySelector(".drawPath"); 
                    
                    if (path) {
                        const length = path.getTotalLength();

                        // Set initial state for this specific path
                        gsap.set(path, {
                            strokeDasharray: length,
                            strokeDashoffset: length
                        });

                        // Create toggle actions for this specific section
                        gsap.to(path, {
                            strokeDashoffset: 0,
                            ease: "none",
                            scrollTrigger: {
                                trigger: section,
                                start: "top top",
                                end: "+=200%", // Pin duration
                                scrub: 1,
                                pin: true,
                                // id: "section-" + (index + 1),
                                // markers: true // Debug markers
                            }
                        });
                    }
                });

            } else {
                console.error("GSAP or ScrollTrigger not loaded.");
            }
        });
    </script>
</body>
</html>
